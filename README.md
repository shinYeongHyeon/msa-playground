# MSA-Playground

이 저장소는 **마이크로 서비스 패턴** 책을 읽고 작성하는 곳이다. 

---

## Food To Go (FTGO)

2005년 후반 설립된 미국 온라인 음식 배달 회사  
자바/ 하나의 WAR 파일로 구성된 모놀리스 개발,

### FTGO Application Architecture

![](src/FTGO_%20Monolithic_Architecture.jpg)

논리적으로는 모듈화한 아키텍쳐임에도 애플리케이션은 WAR 하나로 패키징  
그렇다면 모놀리식은 나쁜 건가 ?

#### 모놀리식 아키텍쳐의 장점
모놀리식이 나쁜 건 아니다, 충분히 좋다.

1. **개발이 간단하다** : IDE 등 개발 툴 들은 단일 애플리케이션 구축에 초점이 맞추어져 있다.
2. **애플리케이션 변경이 쉽다** : 코드, DB 스키마 등을 하나만 변경해서 빌드/배포하기 용이하다.
3. **테스트가 용이하다** : 어플리케이션을 띄우고, API 호출하고, UI 테스트 하며, 종단 간 테스트를 하면 된다.  
4. **배포가 쉽다** : 한 곳에서만 올리면 된다.  
5. **확장이 쉽다** : 애플리케이션 인스턴스를 여러 개 실행하면 된다.

그런데, 시나브로 개발/테스트/배포/확장은 소모성 회의는 많아지고, 애자일 방법론도 도입해보았지만 개발 속도는 점점 더 더뎌진다.

### WHY ?

#### 1. 모놀리식의 근본적 한계

스프린트를 진행해 나갈수록 추가 구현할 스토리가 늘어갔고, 그만큼 코드베이스와 관리 오버헤드는 점점 더 증가.  
점점 더 인원은 늘어나겠죠.  

한 때는 조그마했던 어플리케이션은 수년간 계속 몸집이 커지고, 거대하게 바뀌었고 소규모였던 개발 팀도 이제는 거대해지고 분야가 나뉘어진다.  
아키텍처가 몸에 맞지 않게 되니 FTGO 는 모놀리식 지옥에 빠져 지금은 애자일식 개발/배포도 어려워짐.  
왜 그럴까 ?

##### 2. 너무 복잡해서 개발자가 주눅든다.

거대해진 모놀리식 애플리케이션은 일단 **너무 복잡**하다.  
여느 개발자가 완전히 이해할 수 없을 정도로 내용이 방대해서 버그를 고치는 것조차 어려워지고, 새 기능을 정확하게 구현하기가 갈수록 힘들고 시간도 오래 걸린다.  
마감일자 놓치기는 덤.  
개발하면서, 변경이 될 때마다 코드베이스는 한층 더복잡해지고 난해한 코드로 뒤덮이게 된다.  

##### 3. 개발이 더디다

복잡도와 싸우는 것과는 별개로 개발자의 일상마저 더뎌지게 된다.  
애플리케이션이 너무 거대해 IDE 속도는 느려지고, 빌드 시간도 오래걸리게 된다.  
코드를 수정하고 빌드/실행 후 테스트까지 너무 많은 시간이 소요된다.  

##### 4. 커밋부터 배포에 이르는 길고 험난한 여정  

고친 내용을 실서버/프로덕션에 배포하는 일이 아주 길고 고통스러워진다.  
여러 코드가 한 곳에 몰리다 보니 테스트도 어려워 지고 릴리스 자체가 어려워 지기도 하죠.  
**feature branch** 로 이 문제가 해결되나 싶었지만 결국 고통스러운 **rebase/merge** 작업이 새로 나오게 되었죠.  

##### 5. 확장하기 어렵다.

##### 6. 확실한 전달이 어렵다

애플리케이션 자체가 너무 크다보니 철저하게 테스트하기가 어려워지고, 이로 인해 버그 발생률이 올라가며, 신뢰성이 떨어지게 된다.  
전체 모듈이 하나의 프로세스로 실행되는 까닭에 결함이 서로 격리 (Fault Isolation) 되지 않고 그러다 보니 버그가 하나만 있어도 전체 애플리케이션에 영향을 주는 케이스가 생기죠.  
이거는 매출고 직결되어 경영진의 신뢰도와도 연결되죠.  

##### 7. 갈수록 한물간 기술 스택에 발목이 붙잡히다.  

끝으로, 모놀리식 지옥은 거대하고 고착화된 아키텍쳐로 인해서 점점 한물간 기술스택이 되어진다.  
**"특성상", "이렇다보니", "어쩔 수 없이", "일단은", "무서우니까"** 
규모가 큰 팀이면, 커지는 팀이라면 여러 사람이 모놀리식 애플리케이션 하나에 달라붙어 작업할 때 일어나는 어쩔 수 없는 일들이다.  
팀 차원에서 필연적으로 일어날 일들을 조금 늦추는 일 외에는 방법이 없다.  
이 지옥을 탈출하는 방법은 마이크로서비스 아키텍쳐의 문을 여는 방법밖에 없다.  


